+++
date = "2016-12-11T18:27:02+09:00"
title = "SQLアンチパターンを読んで、SQLのメタデータを正しく取り扱うことの重要さを知った"
tags = ['sql']
draft = true
+++

SQLアンチパターンを読んで思ったことを、メタデータの取り扱い観点でまとめます。

<!--more-->

# はじめに
[SQLアンチパターン](http://books.rakuten.co.jp/rb/12185610/)を読みました。  
この本を読んで、SQLの難しさはメタデータの取り扱いにあるのだな、と感じました。  
「メタデータの取り扱い」に注目して、SQLアンチパターンの内容をまとめようと思います。

# RDBのデータとメタデータ
![データとメタデータ](/img/data_metadata.jpg)  
RDBでは、さまざまなデータを取り扱うことになるわけですが、データとメタデータの２種類があります。  
データ: リレーショナルな形で保存されるデータそのもの、テーブルに入っているデータ  
メタデータ： テーブルに保存されるデータ以外のデータ  
例)  
- テーブル名  
- カラム名  
- 各カラムに格納できるデータ型  
- 制約（外部キー制約、NOT NULL制約など）  
- テーブル間の関連  

このデータとメタデータですが、DBの論理設計によっては、  
1. メタデータ的なものをデータとして扱う  
2. データ的なものをメタデータとして扱う  
といったことが可能となります。  
そして、データをメタデータとして暑かったり、メタデータを扱ったりすることで、DBの設計がよくなったり、悪くなったりします。  


# メタデータをテーブルに格納するアンチパターン
- 5章のEAV（エンティティ・アトリビュート・バリュー）がこれに当てはまります。  
- 8章のメタデータトリブル

# メタデータのテーブルを作ることで設計がよくなるパターン
- 1章ジェイウォークの解決策で出てくる交差テーブル
- 
